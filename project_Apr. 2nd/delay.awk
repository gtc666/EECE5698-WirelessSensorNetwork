BEGIN {  bits = 0;  first_time = -1;  last_time = 0;  n=0;  n1=0;  t=0;  delay = 0;  total_delay = 0;  s=0;  r = 0;}{  if (($1 == "r")  && ($4 == "AGT" )  ) {    last_time = $2;    t=t+1;    size=$8*1;    bits= bits + $8 * 8;    packet_end[$6] = $2/1000;    r= r+1;  }    if ( (first_time == -1) && ($4 =="AGT" ))    first_time = $2;  if (($1 == "s") && ($4 == "AGT") ) {      packet_start[$6] = $2/1000;      s =s+1;  }}END {  rate = (bits/1000)/(last_time-first_time);  pdr = (r/s)*100;  if ( r == 0) {total_delay =0;}  else {         for (packet_id = 0; packet_id < s; packet_id++){           if (packet_end[packet_id] != 0){         total_delay = total_delay + packet_end[packet_id];         total_delay = total_delay - packet_start[packet_id];         n++;        }         }        delay = total_delay*1000/n;        }    printf "StartTime = %.4f  LastTime = %.4f \n", first_time, last_time;  printf "sending = %d receiving = %d PDR = %.2f \n" , s,r,pdr;  printf "delay = %f\n",delay;  printf "throughput = %f\n",rate;printf " %d %d\n",n,n1;  print delay >> "delay.txt";  print pdr >> "pdr.txt";}